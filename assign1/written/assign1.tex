
\documentclass[11pt]{article}
\usepackage{ctex}
\usepackage{amsfonts}

\input{../../tex/defs.tex}

% Useful syntax commands
\newcommand{\jarr}[1]{\left[#1\right]}   % \jarr{x: y} = {x: y}
\newcommand{\jobj}[1]{\left\{#1\right\}} % \jobj{1, 2} = [1, 2]
\newcommand{\pgt}[1]{\, > {#1}}          % \pgt{1} = > 1
\newcommand{\plt}[1]{\, < {#1}}          % \plt{2} = < 2
\newcommand{\peq}[1]{\, = {#1}}          % \peq{3} = = 3
\newcommand{\prop}[1]{\langle{#1}\rangle}% \prop{x} = <x>
\newcommand{\matches}[2]{{#1}\sim{#2}}   % \matches{a}{b} = a ~ b
\newcommand{\aeps}{\varepsilon}          % \apes = epsilon
\newcommand{\akey}[2]{.{#1}\,{#2}}       % \akey{s}{a} = .s a
\newcommand{\aidx}[2]{[#1]\,{#2}}        % \aidx{i}{a} = [i] a
\newcommand{\apipe}[1]{\mid {#1}}        % \apipe{a} = | a

% Other useful syntax commands:
%
% \msf{x} = x (not italicised)
% \falset = false
% \truet = true
% \tnum = num
% \tbool = bool
% \tstr = str


\begin{document}

\hwtitle
  {Assignment 1}
  {Will Crichton (wcrichto)} %% REPLACE THIS WITH YOUR NAME/ID

\problem{Problem 1}

Part 1:

\begin{alignat*}{1}
\msf{Property}~p1 ::= \qamp (> 0 \enspace \wedge <5) \enspace \vee =10 \\
p2 ::= \qamp ='X' \vee ='Y' \\
p3 ::= \qamp \varepsilon \\
\\
\msf{Schema}~\tau ::= \qamp \msf{num} \prop{p1} \\
\mid \qamp \left \{ \msf{'a':bool, 'b':string} \prop{p2} \right \} \\
\mid \qamp \left [ \left \{ \msf{'x':num} \prop{p3} \right \} \right ]
\end{alignat*}

Part 2:

% mathpar is the environment for writing inference rules. It takes care of
% the spacing and line breaks automatically. Use "\\" in the premises to
% space out multiple assumptions.
\begin{mathpar}

\ir{S-Bool-False}{\ }{\matches{\falset}{\tbool}}

\ir{S-Bool-True}{\ }{\matches{\truet}{\tbool}}

\ir{S-Num}{n \in \mathbb{Z}}{\matches{n}{\msf{num}}}

\ir{S-String}{a \in \{'a' \dots 'z', 'A' \dots 'Z'\}}{\matches{a^{+}}{\msf{string}}}

\ir{S-Num-Correct}{\matches{n}{\msf{num}} \quad (n > 0 \wedge n < 5) \vee n = 10}{\matches{n}{\tau}}

\ir{S-Dict-Correct}{\matches{v1}{\msf{bool}} \quad \matches{v2}{\msf{string}} \quad v2 = 'X' \vee v2 = 'Y'}{\matches{\{'a':v1, 'b':v2\}}{\tau}}

\ir{S-Array-Correct}{\matches{v1}{\msf{num}} }{\matches{[(\{'x':v1\})^{*}]}{\tau}}

% Inference rules go here

\end{mathpar}

\problem{Problem 2}

Part 1:

\begin{mathpar}
% Inference rules go here

\ir{D-Epsilon}{\ }{(\varepsilon, j) \mapsto (\varepsilon, j)}

\ir{D-Dict-Extract}{\matches{j}{\{s:j'\}}}{(.sa, j) \mapsto (a, j_{s})}

\ir{D-Array-Extract}{\matches{j}{[j']}}{(.[n]a, j) \mapsto (a, j_{n})}

\ir{D-Maps-Over-Array-of-Dicts}{\matches{j}{[\{s:j'\}]} \wedge a = .sa'}{(|a, j) \mapsto (a', [j[0]_{s}, j[1]_{s}, \dots, j[|j| - 1]_{s}])}

\ir{D-Maps-Over-Array-of-Array}{\matches{j}{[[j']]} \wedge a = [n]a'}{(|a, j) \mapsto (a', [j[0][n], j[1][n], \dots, j[|j| - 1][n]])}

\end{mathpar}

Part 2:

\begin{mathpar}
% Inference rules go here



\end{mathpar}

\textit{Accessor safety}: for all $a, j, \tau$, if $\matches{a}{\tau}$ and $\matches{j}{\tau}$, then there exists a $j'$ such that $\evals{(a, j)}{\aeps, j'}$.

\begin{proof}
% Proof goes here.
\end{proof}

\end{document}
